<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>VoiceScribe ‚Äî AI Summary</title>
    <meta name="description" content="AI-powered summary of your speech transcript." />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
        rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="card.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="bg-blobs">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
    </div>

    <main class="container summary-container">
        <!-- Back Button -->
        <a href="/" class="back-link" id="back-link">
            <span>‚Üê</span>
            <span>Back to VoiceScribe</span>
        </a>

        <header class="summary-header">
            <span class="summary-page-icon">üìù</span>
            <h1 class="summary-page-title">Speech Summary</h1>
            <p class="summary-page-subtitle">AI-powered analysis of your transcript</p>
        </header>

        <!-- Counseling Card Section -->
        <div class="counseling-card-container">
            <div class="counseling-card">
                <div class="card-header">
                    <span class="card-name" id="card-name">Unknown</span>
                    <span class="card-hp">LVL <span id="card-lvl">1</span></span>
                </div>

                <div class="card-image-frame">
                    <span class="card-avatar" id="card-avatar">üë§</span>
                </div>

                <div class="card-stats">
                    <div class="stat-row">
                        <span class="stat-label">Problem</span>
                        <span class="stat-text" id="card-problem">Analyzing...</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Goal/Reason</span>
                        <span class="stat-text" id="card-reason">Analyzing...</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Progress</span>
                        <span class="stat-text" id="card-progress">Analyzing...</span>
                    </div>
                    <div class="stat-row" style="margin-top: 5px;">
                        <span class="stat-label">Mood</span>
                        <span class="emotion-pill" id="card-mood">Neutral</span>
                    </div>
                </div>

                <div class="card-footer">
                    "Every step forward is a victory."
                </div>
            </div>
        </div>

        <!-- Stats Bar -->
        <div class="stats-bar" id="stats-bar">
            <div class="stat-item">
                <span class="stat-value" id="stat-words">‚Äî</span>
                <span class="stat-label">Words</span>
            </div>
            <div class="stat-divider"></div>
            <div class="stat-item">
                <span class="stat-value" id="stat-duration">‚Äî</span>
                <span class="stat-label">Est. Duration</span>
            </div>
            <div class="stat-divider"></div>
            <div class="stat-item">
                <span class="stat-value" id="stat-topics">‚Äî</span>
                <span class="stat-label">Topics</span>
            </div>
            <div class="stat-divider"></div>
            <div class="stat-item">
                <span class="stat-badge" id="stat-sentiment">‚Äî</span>
                <span class="stat-label">Sentiment</span>
            </div>
        </div>

        <!-- Visual Insights (Charts) -->
        <div class="charts-grid">
            <div class="chart-container">
                <h3 style="color:#e0e6ed; margin-bottom:1rem; font-size:1rem;">Topic Distribution</h3>
                <canvas id="topicsChart"></canvas>
            </div>
            <div class="chart-container">
                <h3 style="color:#e0e6ed; margin-bottom:1rem; font-size:1rem;">Sentiment Profile</h3>
                <canvas id="sentimentChart"></canvas>
            </div>
        </div>

        <!-- Summary Card -->
        <div class="summary-card" style="margin-top: 2rem;">
            <div class="summary-card-accent"></div>
            <div class="summary-card-content">
                <h2 class="summary-card-title">
                    <span class="card-icon">üí°</span> Summary
                </h2>
                <p class="summary-text" id="summary-text">Loading...</p>
            </div>
        </div>

        <!-- Key Points Card -->
        <div class="summary-card">
            <div class="summary-card-accent accent-blue"></div>
            <div class="summary-card-content">
                <h2 class="summary-card-title">
                    <span class="card-icon">üéØ</span> Key Points
                </h2>
                <ul class="key-points-list" id="key-points-list">
                    <li>Loading...</li>
                </ul>
            </div>
        </div>

        <!-- Detailed Analysis Card -->
        <div class="summary-card">
            <div class="summary-card-accent accent-green"></div>
            <div class="summary-card-content">
                <h2 class="summary-card-title">
                    <span class="card-icon">üîç</span> Detailed Analysis
                </h2>
                <p class="analysis-text" id="analysis-text">Loading...</p>
            </div>
        </div>

        <!-- Sentiment Card -->
        <div class="summary-card">
            <div class="summary-card-accent accent-pink"></div>
            <div class="summary-card-content">
                <h2 class="summary-card-title">
                    <span class="card-icon">üí≠</span> Sentiment Analysis
                </h2>
                <p class="sentiment-explanation" id="sentiment-explanation">Loading...</p>
            </div>
        </div>

        <!-- Topics -->
        <div class="topics-section" id="topics-section" style="display: none;">
            <h2 class="summary-card-title">
                <span class="card-icon">üè∑Ô∏è</span> Topics Detected
            </h2>
            <div class="topics-pills" id="topics-pills"></div>
        </div>

        <!-- Original Transcript (collapsible) -->
        <details class="original-transcript-details">
            <summary class="original-transcript-toggle">
                <span class="card-icon">üìÑ</span> View Original Transcript
            </summary>
            <div class="original-transcript-box" id="original-transcript">
                Loading...
            </div>
        </details>

        <!-- Actions -->
        <div class="summary-actions">
            <button id="btn-save" class="btn btn-save" title="Save Session" style="background: #2b6cb0;">
                <span class="btn-icon">üíæ</span>
                <span>Save Session</span>
            </button>
            <button id="btn-copy-summary" class="btn btn-summarize" title="Copy Summary">
                <span class="btn-icon">üìã</span>
                <span>Copy Summary</span>
            </button>
            <a href="/" class="btn btn-record" title="New Recording" style="text-decoration:none;">
                <span class="btn-icon">üé§</span>
                <span>New Recording</span>
            </a>
        </div>

        <!-- History & Profile Section -->
        <div class="history-section">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem;">
                <h2 class="summary-card-title" style="margin:0;">üìú Session History</h2>
                <button id="btn-analyze-profile" class="btn"
                    style="font-size:0.8rem; padding:0.4rem 0.8rem; background:#4fd1c5; color:#1a202c;">
                    Analyze Profile
                </button>
            </div>

            <div id="history-list">
                <!-- Session items will inevitably go here -->
                <p style="color:#718096; font-style:italic;">No history loaded.</p>
            </div>
        </div>

        <!-- Toast -->
        <div id="toast" class="toast" style="display: none;">
            <span id="toast-message"></span>
        </div>

        <footer class="footer">
            <p>Summary generated by Gemini AI ‚Äî results may vary.</p>
        </footer>
    </main>

    <script src="summary.js"></script>
</body>

</html>